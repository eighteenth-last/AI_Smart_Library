# 知识库问答对管理页面使用说明

## 📍 访问路径

前端路由已配置完成，可通过以下路径访问：

```
http://localhost:3000/admin/knowledge-qa
```

## 🎯 页面功能

### 1. 知识库列表
- 展示所有知识库问答对
- 包含字段：ID、问题、答案、分类、来源、是否公开、命中次数
- 支持分页显示

### 2. 搜索筛选
- **关键词搜索**：搜索问题/答案内容
- **分类筛选**：筛选指定分类（图书馆业务/作者问答/图书推荐）

### 3. CRUD 操作
- ➕ **新增问答**：点击"新增问答"按钮
- ✏️ **编辑问答**：点击列表中的"编辑"按钮
- 🗑️ **删除问答**：点击列表中的"删除"按钮

### 4. 批量导入
- 📤 **上传文件**：点击"批量导入"按钮，选择 Excel 或 CSV 文件
- 📊 **查看结果**：自动弹窗显示导入统计和错误详情
- ✅ **支持格式**：
  - Excel: .xlsx, .xls
  - CSV: .csv

### 5. 批量导出
- 📥 **导出 Excel**：点击"导出数据" → 选择"导出为 Excel"
- 📄 **导出 CSV**：点击"导出数据" → 选择"导出为 CSV"
- 🔍 **分类导出**：先选择分类，再导出，只导出该分类的数据

## 🚀 快速开始

### 第一次使用

1. **启动前端服务**
   ```bash
   cd fronted/web-admin
   npm install
   npm run dev
   ```

2. **启动后端服务**
   ```bash
   cd Server_Ai
   mvn spring-boot:run
   ```

3. **访问页面**
   - 打开浏览器：http://localhost:3000
   - 登录管理员账号
   - 点击侧边栏"知识库管理"（如果菜单已配置）
   - 或直接访问：http://localhost:3000/admin/knowledge-qa

### 导入测试数据

1. 准备 Excel 文件，格式如下：

| 问题 | 答案 | 分类 | 来源 | 是否公开 |
|------|------|------|------|----------|
| 图书馆开放时间是什么？ | 图书馆周一至周日 8:00-22:00 开放 | 图书馆业务 | system | 1 |

2. 点击"批量导入"按钮
3. 选择准备好的 Excel 文件
4. 等待导入完成，查看结果

### 导出数据

1. （可选）选择分类筛选
2. 点击"导出数据"下拉菜单
3. 选择"导出为 Excel"或"导出为 CSV"
4. 文件自动下载

## 📋 文件格式要求

### Excel 格式

**第1行（标题行）**：
| 问题 | 答案 | 分类 | 来源 | 是否公开 |
|------|------|------|------|----------|

**第2行开始（数据行）**：
| 图书馆开放时间是什么？ | 图书馆周一至周日 8:00-22:00 开放 | 图书馆业务 | system | 1 |

### CSV 格式

```csv
question,answer,category,source,is_public
图书馆开放时间是什么？,图书馆周一至周日 8:00-22:00 开放,图书馆业务,system,1
```

## ⚙️ 侧边栏菜单配置（可选）

如果需要在侧边栏添加菜单项，请在 Layout 组件中添加：

```vue
<n-menu-item key="knowledge-qa" @click="router.push('/admin/knowledge-qa')">
  <template #icon>
    <n-icon :component="BookOutlined" />
  </template>
  知识库问答对
</n-menu-item>
```

## 🔧 API 接口说明

### 后端接口

- **列表查询**: `GET /api/ai/admin/knowledge?category=xxx&page=1&size=10`
- **新增**: `POST /api/ai/admin/knowledge`
- **编辑**: `PUT /api/ai/admin/knowledge/{kbId}`
- **删除**: `DELETE /api/ai/admin/knowledge/{kbId}`
- **批量导入**: `POST /api/ai/admin/knowledge/import`
- **导出 Excel**: `GET /api/ai/admin/knowledge/export/excel?category=xxx`
- **导出 CSV**: `GET /api/ai/admin/knowledge/export/csv?category=xxx`

### 前端 API

- `importKnowledge(file)` - 导入知识库
- `exportToExcel(category?)` - 导出为 Excel
- `exportToCSV(category?)` - 导出为 CSV

## 📸 页面截图

```
┌────────────────────────────────────────────────────────────┐
│  知识库问答对管理                                             │
├────────────────────────────────────────────────────────────┤
│  [搜索框] [分类选择] [搜索] [+新增] [📤导入] [📥导出▼]        │
├────────────────────────────────────────────────────────────┤
│  ID | 问题 | 答案 | 分类 | 来源 | 公开 | 命中 | 操作         │
│  1  | ...  | ...  | ... | ... |  ✅  |  150 | ✏️ 🗑️        │
│  2  | ...  | ...  | ... | ... |  ✅  |  120 | ✏️ 🗑️        │
└────────────────────────────────────────────────────────────┘
```

## ❓ 常见问题

### Q1: 页面打不开？
**A**: 检查：
1. 前端服务是否启动：`npm run dev`
2. 后端服务是否启动：`mvn spring-boot:run`
3. 路由是否正确：http://localhost:3000/admin/knowledge-qa

### Q2: 导入失败？
**A**: 检查：
1. 文件格式是否正确（Excel 或 CSV）
2. 第1行是否为标题行
3. 必填字段（问题、答案）是否为空
4. 查看导入结果弹窗中的错误详情

### Q3: 导出没反应？
**A**: 检查：
1. 后端服务是否正常
2. 浏览器是否阻止下载
3. 检查浏览器控制台是否有错误

### Q4: TypeScript 类型错误？
**A**: 这是正常的，Vue 动态导入组件时 TypeScript 可能报类型检查错误，不影响运行。

## 📞 技术支持

如有问题，请查看：
- [知识库导入导出功能文档.md](./知识库导入导出功能文档.md)
- [知识库导入模板说明.md](./知识库导入模板说明.md)
- [知识库导入导出完成总结.md](./知识库导入导出完成总结.md)

---

**最后更新**: 2025-11-29  
**版本**: v1.0
